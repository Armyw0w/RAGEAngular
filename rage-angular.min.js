!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("@angular/core")):"function"==typeof define&&define.amd?define(["exports","@angular/core"],n):n((e.ng=e.ng||{},e.ng.rage={}),e.ng.core)}(this,function(e,n){"use strict";var t=function(){function e(){var e=this;this.CustomEvents=new n.EventEmitter,this.call=function(n){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];e.CustomEvents.emit({func:n,args:t})},this.Client={waitingResponses:[],call:function(n,t){if("function"!=typeof window.RageJS.callClient)throw"RageJS.callClient isn't set in index.html";var i={Arguments:n.args};if("function"==typeof t){var o=e.Client.addToWaitingResponses(n.fn,t);i.catchResponse={id:o,fnCalled:n.fn}}window.RageJS.callClient(n.fn,i)},response:function(n,t,i){var o=e.Client.getWaitingResponseIndex(n,t);if(-1===o)throw"RAGE ERROR: A response came from client but the function wasn't in waiting responses";e.Client.waitingResponses[o].callback(i)},getWaitingResponseIndex:function(e,n){for(var t=this.waitingResponses.length,i=-1,o=0;o<t;++o)if(this.waitingResponses[o].id===e&&this.waitingResponses[o].fnCalled===n){i=o;break}return i},addToWaitingResponses:function(n,t){var i=Math.random().toString(36).substr(2,9);return e.Client.waitingResponses.push({id:i,fnCalled:n,callback:t}),i}},window.RAGE={call:this.call,Client:{response:this.Client.response}},"object"==typeof window.RageJS&&window.RageJS.Init()}return Object.defineProperty(e.prototype,"listen",{get:function(){return this.CustomEvents},enumerable:!0,configurable:!0}),e}();t.decorators=[{type:n.Injectable}],t.ctorParameters=function(){return[]};var i=function(){return function(){}}();i.decorators=[{type:n.NgModule,args:[{providers:[t]}]}],i.ctorParameters=function(){return[]},e.RAGEModule=i,e.RAGE=t,Object.defineProperty(e,"__esModule",{value:!0})});